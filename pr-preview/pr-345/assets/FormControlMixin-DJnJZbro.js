var i=function(u,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?u!==e||!r:!e.has(u))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(u):r?r.value:e.get(u)},o=function(u,e,n,r,h){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?u!==e||!h:!e.has(u))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?h.call(u,n):h?h.value=n:e.set(u,n),n};function G(u){var e,n,r,h,v,k,m,C,M,E,W,F,g,y,f,P,T,A;class L extends u{constructor(...t){var s,a,l;super(...t),e.add(this),this.internals=this.attachInternals(),n.set(this,!1),r.set(this,!1),h.set(this,!1),v.set(this,void 0),k.set(this,void 0),m.set(this,!0),C.set(this,""),M.set(this,()=>{o(this,h,!0,"f"),o(this,n,!0,"f"),i(this,e,"m",f).call(this)}),E.set(this,()=>{o(this,n,!1,"f"),i(this,e,"m",P).call(this,this.shouldFormValueUpdate()?i(this,C,"f"):""),!this.validity.valid&&i(this,h,"f")&&o(this,r,!0,"f");const c=i(this,e,"m",f).call(this);this.validationMessageCallback&&this.validationMessageCallback(c?this.internals.validationMessage:"")}),W.set(this,()=>{var c;i(this,m,"f")&&this.validationTarget&&(this.internals.setValidity(this.validity,this.validationMessage,this.validationTarget),o(this,m,!1,"f")),o(this,h,!0,"f"),o(this,r,!0,"f"),i(this,e,"m",f).call(this),(c=this===null||this===void 0?void 0:this.validationMessageCallback)===null||c===void 0||c.call(this,this.showError?this.internals.validationMessage:"")}),F.set(this,void 0),g.set(this,!1),y.set(this,Promise.resolve()),(s=this.addEventListener)===null||s===void 0||s.call(this,"focus",i(this,M,"f")),(a=this.addEventListener)===null||a===void 0||a.call(this,"blur",i(this,E,"f")),(l=this.addEventListener)===null||l===void 0||l.call(this,"invalid",i(this,W,"f")),this.setValue(null)}static get formAssociated(){return!0}static get validators(){return this.formControlValidators||[]}static get observedAttributes(){const t=this.validators.map(l=>l.attribute).flat(),s=super.observedAttributes||[];return[...new Set([...s,...t])]}static getValidator(t){return this.validators.find(s=>s.attribute===t)||null}static getValidators(t){return this.validators.filter(s=>{var a;if(s.attribute===t||!((a=s.attribute)===null||a===void 0)&&a.includes(t))return!0})}get form(){return this.internals.form}get showError(){return i(this,e,"m",f).call(this)}checkValidity(){return this.internals.checkValidity()}get validity(){return this.internals.validity}get validationMessage(){return this.internals.validationMessage}attributeChangedCallback(t,s,a){var l;(l=super.attributeChangedCallback)===null||l===void 0||l.call(this,t,s,a);const w=this.constructor.getValidators(t);w?.length&&this.validationTarget&&this.setValue(i(this,C,"f"))}setValue(t){var s;o(this,r,!1,"f"),(s=this.validationMessageCallback)===null||s===void 0||s.call(this,""),o(this,C,t,"f");const l=this.shouldFormValueUpdate()?t:null;this.internals.setFormValue(l),i(this,e,"m",P).call(this,l),this.valueChangedCallback&&this.valueChangedCallback(l),i(this,e,"m",f).call(this)}shouldFormValueUpdate(){return!0}get validationComplete(){return new Promise(t=>t(i(this,y,"f")))}formResetCallback(){var t,s;o(this,h,!1,"f"),o(this,r,!1,"f"),i(this,e,"m",f).call(this),(t=this.resetFormControl)===null||t===void 0||t.call(this),(s=this.validationMessageCallback)===null||s===void 0||s.call(this,i(this,e,"m",f).call(this)?this.validationMessage:"")}}return n=new WeakMap,r=new WeakMap,h=new WeakMap,v=new WeakMap,k=new WeakMap,m=new WeakMap,C=new WeakMap,M=new WeakMap,E=new WeakMap,W=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,e=new WeakSet,f=function(){if(this.hasAttribute("disabled"))return!1;const t=i(this,r,"f")||i(this,h,"f")&&!this.validity.valid&&!i(this,n,"f");return t&&this.internals.states?this.internals.states.add("--show-error"):this.internals.states&&this.internals.states.delete("--show-error"),t},P=function(t){const s=this.constructor,a={},l=s.validators,c=[],w=l.some(d=>d.isValid instanceof Promise);i(this,g,"f")||(o(this,y,new Promise(d=>{o(this,F,d,"f")}),"f"),o(this,g,!0,"f")),i(this,v,"f")&&(i(this,v,"f").abort(),o(this,k,i(this,v,"f"),"f"));const p=new AbortController;o(this,v,p,"f");let b,x=!1;l.length&&(l.forEach(d=>{const S=d.key||"customError",_=d.isValid(this,t,p.signal);_ instanceof Promise?(c.push(_),_.then(U=>{U!=null&&(a[S]=!U,b=i(this,e,"m",A).call(this,d,t),i(this,e,"m",T).call(this,a,b))})):(a[S]=!_,this.validity[S]!==!_&&(x=!0),!_&&!b&&(b=i(this,e,"m",A).call(this,d,t)))}),Promise.allSettled(c).then(()=>{var d;p?.signal.aborted||(o(this,g,!1,"f"),(d=i(this,F,"f"))===null||d===void 0||d.call(this))}),(x||!w)&&i(this,e,"m",T).call(this,a,b))},T=function(t,s){if(this.validationTarget)this.internals.setValidity(t,s,this.validationTarget),o(this,m,!1,"f");else{if(this.internals.setValidity(t,s),this.internals.validity.valid)return;o(this,m,!0,"f")}},A=function(t,s){if(this.validityCallback){const a=this.validityCallback(t.key||"customError");if(a)return a}return t.message instanceof Function?t.message(this,s):t.message},L}export{G as F};
