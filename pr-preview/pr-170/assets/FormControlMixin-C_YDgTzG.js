var e=function(u,s,o,r){if(o==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?u!==s||!r:!s.has(u))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?r:o==="a"?r.call(u):r?r.value:s.get(u)},n=function(u,s,o,r,h){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?u!==s||!h:!s.has(u))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?h.call(u,o):h?h.value=o:s.set(u,o),o};function G(u){var s,o,r,h,m,k,_,C,M,E,W,F,g,y,c,P,T,A;class L extends u{constructor(...t){var i,a,l;super(...t),s.add(this),this.internals=this.attachInternals(),o.set(this,!1),r.set(this,!1),h.set(this,!1),m.set(this,void 0),k.set(this,void 0),_.set(this,!0),C.set(this,""),M.set(this,()=>{n(this,h,!0,"f"),n(this,o,!0,"f"),e(this,s,"m",c).call(this)}),E.set(this,()=>{n(this,o,!1,"f"),e(this,s,"m",P).call(this,this.shouldFormValueUpdate()?e(this,C,"f"):""),!this.validity.valid&&e(this,h,"f")&&n(this,r,!0,"f");const f=e(this,s,"m",c).call(this);this.validationMessageCallback&&this.validationMessageCallback(f?this.internals.validationMessage:"")}),W.set(this,()=>{var f;e(this,_,"f")&&this.validationTarget&&(this.internals.setValidity(this.validity,this.validationMessage,this.validationTarget),n(this,_,!1,"f")),n(this,h,!0,"f"),n(this,r,!0,"f"),e(this,s,"m",c).call(this),(f=this===null||this===void 0?void 0:this.validationMessageCallback)===null||f===void 0||f.call(this,this.showError?this.internals.validationMessage:"")}),F.set(this,void 0),g.set(this,!1),y.set(this,Promise.resolve()),(i=this.addEventListener)===null||i===void 0||i.call(this,"focus",e(this,M,"f")),(a=this.addEventListener)===null||a===void 0||a.call(this,"blur",e(this,E,"f")),(l=this.addEventListener)===null||l===void 0||l.call(this,"invalid",e(this,W,"f")),this.setValue(null)}static get formAssociated(){return!0}static get validators(){return this.formControlValidators||[]}static get observedAttributes(){const t=this.validators.map(l=>l.attribute).flat(),i=super.observedAttributes||[];return[...new Set([...i,...t])]}static getValidator(t){return this.validators.find(i=>i.attribute===t)||null}static getValidators(t){return this.validators.filter(i=>{var a;if(i.attribute===t||!((a=i.attribute)===null||a===void 0)&&a.includes(t))return!0})}get form(){return this.internals.form}get showError(){return e(this,s,"m",c).call(this)}checkValidity(){return this.internals.checkValidity()}get validity(){return this.internals.validity}get validationMessage(){return this.internals.validationMessage}attributeChangedCallback(t,i,a){var l;(l=super.attributeChangedCallback)===null||l===void 0||l.call(this,t,i,a);const w=this.constructor.getValidators(t);w?.length&&this.validationTarget&&this.setValue(e(this,C,"f"))}setValue(t){var i;n(this,r,!1,"f"),(i=this.validationMessageCallback)===null||i===void 0||i.call(this,""),n(this,C,t,"f");const l=this.shouldFormValueUpdate()?t:null;this.internals.setFormValue(l),e(this,s,"m",P).call(this,l),this.valueChangedCallback&&this.valueChangedCallback(l),e(this,s,"m",c).call(this)}shouldFormValueUpdate(){return!0}get validationComplete(){return new Promise(t=>t(e(this,y,"f")))}formResetCallback(){var t,i;n(this,h,!1,"f"),n(this,r,!1,"f"),e(this,s,"m",c).call(this),(t=this.resetFormControl)===null||t===void 0||t.call(this),(i=this.validationMessageCallback)===null||i===void 0||i.call(this,e(this,s,"m",c).call(this)?this.validationMessage:"")}}return o=new WeakMap,r=new WeakMap,h=new WeakMap,m=new WeakMap,k=new WeakMap,_=new WeakMap,C=new WeakMap,M=new WeakMap,E=new WeakMap,W=new WeakMap,F=new WeakMap,g=new WeakMap,y=new WeakMap,s=new WeakSet,c=function(){if(this.hasAttribute("disabled"))return!1;const t=e(this,r,"f")||e(this,h,"f")&&!this.validity.valid&&!e(this,o,"f");return t&&this.internals.states?this.internals.states.add("--show-error"):this.internals.states&&this.internals.states.delete("--show-error"),t},P=function(t){const i=this.constructor,a={},l=i.validators,f=[],w=l.some(d=>d.isValid instanceof Promise);e(this,g,"f")||(n(this,y,new Promise(d=>{n(this,F,d,"f")}),"f"),n(this,g,!0,"f")),e(this,m,"f")&&(e(this,m,"f").abort(),n(this,k,e(this,m,"f"),"f"));const p=new AbortController;n(this,m,p,"f");let b,x=!1;l.length&&(l.forEach(d=>{const S=d.key||"customError",v=d.isValid(this,t,p.signal);v instanceof Promise?(f.push(v),v.then(U=>{U!=null&&(a[S]=!U,b=e(this,s,"m",A).call(this,d,t),e(this,s,"m",T).call(this,a,b))})):(a[S]=!v,this.validity[S]!==!v&&(x=!0),!v&&!b&&(b=e(this,s,"m",A).call(this,d,t)))}),Promise.allSettled(f).then(()=>{var d;p?.signal.aborted||(n(this,g,!1,"f"),(d=e(this,F,"f"))===null||d===void 0||d.call(this))}),(x||!w)&&e(this,s,"m",T).call(this,a,b))},T=function(t,i){if(this.validationTarget)this.internals.setValidity(t,i,this.validationTarget),n(this,_,!1,"f");else{if(this.internals.setValidity(t,i),this.internals.validity.valid)return;n(this,_,!0,"f")}},A=function(t,i){if(this.validityCallback){const a=this.validityCallback(t.key||"customError");if(a)return a}return t.message instanceof Function?t.message(this,i):t.message},L}export{G as F};
