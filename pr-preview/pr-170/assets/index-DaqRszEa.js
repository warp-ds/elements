const c=n=>typeof n=="string",v=n=>typeof n=="function",C=new Map,A="en";function L(n){return[...Array.isArray(n)?n:[n],A]}function E(n,e,t){const s=L(n);t||(t="default");let r;if(typeof t=="string")switch(r={day:"numeric",month:"short",year:"numeric"},t){case"full":r.weekday="long";case"long":r.month="long";break;case"short":r.month="numeric";break}else r=t;return d(()=>p("date",s,t),()=>new Intl.DateTimeFormat(s,r)).format(c(e)?new Date(e):e)}function x(n,e,t){let s;if(t||(t="default"),typeof t=="string")switch(s={second:"numeric",minute:"numeric",hour:"numeric"},t){case"full":case"long":s.timeZoneName="short";break;case"short":delete s.second}else s=t;return E(n,e,s)}function w(n,e,t){const s=L(n);return d(()=>p("number",s,t),()=>new Intl.NumberFormat(s,t)).format(e)}function D(n,e,t,{offset:s=0,...r}){const l=L(n),o=e?d(()=>p("plural-ordinal",l),()=>new Intl.PluralRules(l,{type:"ordinal"})):d(()=>p("plural-cardinal",l),()=>new Intl.PluralRules(l,{type:"cardinal"}));return r[t]??r[o.select(t-s)]??r.other}function d(n,e){const t=n();let s=C.get(t);return s||(s=e(),C.set(t,s)),s}function p(n,e,t){const s=e.join("-");return`${n}-${s}-${JSON.stringify(t)}`}const I=/\\u[a-fA-F0-9]{4}|\\x[a-fA-F0-9]{2}/,O=n=>n.replace(/\\u([a-fA-F0-9]{4})|\\x([a-fA-F0-9]{2})/g,(e,t,s)=>{if(t){const r=parseInt(t,16);return String.fromCharCode(r)}else{const r=parseInt(s,16);return String.fromCharCode(r)}}),S="%__lingui_octothorpe__%",$=(n,e,t={})=>{const s=e||n,r=o=>typeof o=="object"?o:t[o],l=(o,i)=>{const a=Object.keys(t).length?r("number"):void 0,u=w(s,o,a);return i.replace(new RegExp(S,"g"),u)};return{plural:(o,i)=>{const{offset:a=0}=i,u=D(s,!1,o,i);return l(o-a,u)},selectordinal:(o,i)=>{const{offset:a=0}=i,u=D(s,!0,o,i);return l(o-a,u)},select:M,number:(o,i)=>w(s,o,r(i)||{style:i}),date:(o,i)=>E(s,o,r(i)||i),time:(o,i)=>x(s,o,r(i)||i)}},M=(n,e)=>e[n]??e.other;function N(n,e,t){return(s={},r)=>{const l=$(e,t,r),o=(a,u=!1)=>Array.isArray(a)?a.reduce((m,_)=>{if(_==="#"&&u)return m+S;if(c(_))return m+_;const[F,h,P]=_;let y={};h==="plural"||h==="selectordinal"||h==="select"?Object.entries(P).forEach(([b,j])=>{y[b]=o(j,h==="plural"||h==="selectordinal")}):y=P;let g;if(h){const b=l[h];g=b(s[F],y)}else g=s[F];return g==null?m:m+g},""):a,i=o(n);return c(i)&&I.test(i)?O(i):c(i)?i:i?String(i):""}}var R=Object.defineProperty,T=(n,e,t)=>e in n?R(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,z=(n,e,t)=>(T(n,e+"",t),t);class U{constructor(){z(this,"_events",{})}on(e,t){var s;return(s=this._events)[e]??(s[e]=[]),this._events[e].push(t),()=>this.removeListener(e,t)}removeListener(e,t){const s=this._getListeners(e);if(!s)return;const r=s.indexOf(t);~r&&s.splice(r,1)}emit(e,...t){const s=this._getListeners(e);s&&s.map(r=>r.apply(this,t))}_getListeners(e){const t=this._events[e];return Array.isArray(t)?t:!1}}var H=Object.defineProperty,K=(n,e,t)=>e in n?H(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,f=(n,e,t)=>(K(n,typeof e!="symbol"?e+"":e,t),t);class q extends U{constructor(e){super(),f(this,"_locale",""),f(this,"_locales"),f(this,"_localeData",{}),f(this,"_messages",{}),f(this,"_missing"),f(this,"_messageCompiler"),f(this,"t",this._.bind(this)),e.missing!=null&&(this._missing=e.missing),e.messages!=null&&this.load(e.messages),e.localeData!=null&&this.loadLocaleData(e.localeData),(typeof e.locale=="string"||e.locales)&&this.activate(e.locale??A,e.locales)}get locale(){return this._locale}get locales(){return this._locales}get messages(){return this._messages[this._locale]??{}}get localeData(){return this._localeData[this._locale]??{}}_loadLocaleData(e,t){const s=this._localeData[e];s?Object.assign(s,t):this._localeData[e]=t}setMessagesCompiler(e){return this._messageCompiler=e,this}loadLocaleData(e,t){typeof e=="string"?this._loadLocaleData(e,t):Object.keys(e).forEach(s=>this._loadLocaleData(s,e[s])),this.emit("change")}_load(e,t){const s=this._messages[e];s?Object.assign(s,t):this._messages[e]=t}load(e,t){typeof e=="string"&&typeof t=="object"?this._load(e,t):Object.entries(e).forEach(([s,r])=>this._load(s,r)),this.emit("change")}loadAndActivate({locale:e,locales:t,messages:s}){this._locale=e,this._locales=t||void 0,this._messages[this._locale]=s,this.emit("change")}activate(e,t){this._locale=e,this._locales=t,this.emit("change")}_(e,t,s){if(!this.locale)throw new Error("Lingui: Attempted to call a translation function without setting a locale.\nMake sure to call `i18n.activate(locale)` before using Lingui functions.\nThis issue may also occur due to a race condition in your initialization logic.");let r=s?.message;e||(e=""),c(e)||(t=e.values||t,r=e.message,e=e.id);const l=this.messages[e],o=l===void 0,i=this._missing;if(i&&o)return v(i)?i(this._locale,e):i;o&&this.emit("missing",{id:e,locale:this._locale});let a=l||r||e;return c(a)&&(this._messageCompiler?a=this._messageCompiler(a):console.warn(`Uncompiled message detected! Message:

> ${a}

That means you use raw catalog or your catalog doesn't have a translation for the message and fallback was used.
ICU features such as interpolation and plurals will not work properly for that message. 

Please compile your catalog first. 
`)),c(a)&&I.test(a)?O(a):c(a)?a:N(a,this._locale,this._locales)(t,s?.formats)}date(e,t){return E(this._locales||this._locale,e,t)}number(e,t){return w(this._locales||this._locale,e,t)}}function G(n={}){return new q(n)}const J=G();export{J as i};
